{% extends "../base.html" %}

{% block script_content %}
{% end %}

{% block page_content %}

<div>
<div class="heading">{{verseset.get('name')}}</div>
<div class="pad_bottom">by {{verseset.user().display_name()}}</div>

<div class="pad_bottom">

<a class="button-xsmall pure-button" href="/verseset/play/{{verseset._id}}">play challenge (all verses)</a>

{% if user and ((verseset['user_id'] == user._id) or user.is_admin()) %}
<a class="button-xsmall pure-button" href="/verseset/edit/{{verseset._id}}">edit set</a>
<a class="button-xsmall pure-button" onclick="return vr.confirm_delete();" href="/verseset/remove/{{verseset._id}}">x</a>
{% end %}
</div>

</div>

<div class="pad_bottom">
{% raw verseset.get_commentary_text() %}
</div>

<table class="pure-table pure-table-bordered">

<tbody>
{% for v in verses %}
<tr><td>
<div>{{v['reference'] }}

{% if v.has_key('version') %}
({{v['version']}})
{% end %}
</div>

<div class="paragraph">{{v['text']}}</div>
<div>

<a class="button-xsmall pure-button" href="/verse/play/{{v._id}}">play verse</a> 

{% if user and ((verseset['user_id'] == user._id) or user.is_admin()) %}
 <a class="button-xsmall pure-button" href="/verse/edit/{{v._id}}">edit</a> 
 <a class="button-xsmall pure-button" onclick="return vr.confirm_delete();" href="/verse/remove/{{v._id}}">x</a>
{% end %}
</td></tr>

{% end %}
</tbody>

</table>

<br/>

<h3>High Scores (Challenge Mode)</h3>
<table class="pure-table pure-table-bordered">
<thead><tr><th>#</th><th>User</th><th>Score</th></tr></thead>

<tbody>
{% if len(scores) == 0 %}
<tr><td colspan="3">No one has submitted scores for challenge mode yet.</td></tr>
{% end %}

{% set i = 1 %}
{% for score in scores %}
<tr><td>{{i}}</td><td>{{score['username']}}</td><td>{{score['score']}}</td></tr>
{% set i = i + 1 %}
{% end %}
</tbody>
</table>

<br/>


{% if user and (verseset['user_id'] == user._id) %}
{% include "../verse/_form.html" %}
{% end %}


{% end %}
